import streamlit as st
from transformers import pipeline

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
st.set_page_config(page_title="Summarizer - –ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å")
st.title("üìù –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π –º—ã—Å–ª–∏ —Ç–µ–∫—Å—Ç–∞")
st.write("–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∏–∂–µ, –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç—å –≤—ã–¥–µ–ª–∏—Ç —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ.")

# –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ–º –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—É—é –º–æ–¥–µ–ª—å BART –∏–ª–∏ T5)
@st.cache_resource
def load_model():
    # –ú–æ–¥–µ–ª—å –¥–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä—É—Å—Å–∫–∏–π –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
    return pipeline("summarization", model="facebook/bart-large-cnn")

summarizer = load_model()

# –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞
input_text = st.text_area("–í–∞—à —Ç–µ–∫—Å—Ç:", height=300, placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–ª–∏–Ω–Ω—É—é —Å—Ç–∞—Ç—å—é –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç...")

if st.button("–í—ã–¥–µ–ª–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ"):
    if input_text.strip():
        with st.spinner('–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é...'):
            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª–∏–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            result = summarizer(input_text, max_length=130, min_length=30, do_sample=False)
            summary = result[0]['summary_text']
            
            st.subheader("–ì–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å:")
            st.success(summary)
    else:
        st.warning("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç.")
